Pseudocódigo:

class Estanco : public HoareMonitor
begin
    private:
        var nFumadores:= 3  :const integer
            ocupado         :boolean
            estanquero      :CondVar
            fumadores       :CondVar[nFumadores]
            ingrediente     :integer

    public:

        ponerIngrediente(i: 0..2)  :  void
        esperarRecogidaIngrediente()  :  void
        recogerIngrediente(i: 0..2):  void

end


process ponerIngrediente(i: 0..2)
begin
    if(ocupado)
        estanquero.wait()
    ocupado = true
    ingrediente = i
    fumadores[i].signal()
end

process esperarRecogidaIngrediente()
begin
    while(ocupado)
        estanquero.wait()
end

process recogerIngrediente(i: 0..2)
begin
    while(ingrediente!=i)
        fumadores[i].wait()
    ocupado = false
    estanquero.signal()
end



---------------------------------------------------------------------

Lo que quiere el profe.
El mostrador puede tomar 4 valores: vacío, con cerillas, con papel y con tabaco
Se representa con una entera que toma los valores -1, 0, 1, 2.

int mostrador = -1;

Se necesita una variable condicion donde el estanquero espere a que el mostrador se quede vacío
Y cada fumador espera a que su ingrediente i este en el mostrador, por tanto se necesita una
variable de condicion para cada fumador.

CondVar estanquero
        fumadores[nFumadores]

process ponerIngrediente(i: 0..2)
begin
    mostrador = i
    if( fumador[i].queue() )
        fumador[i].signal()
end

process recogerIngrediente(i: 0..2)
begin
    if(mostrador!=i)
        fumadores[i].wait()
    mostrador = -1
    estanquero.signal()
end

process esperarRecogidaIngrediente()
begin
    if(mostrador!=-1)
        estanquero.wait()
end





